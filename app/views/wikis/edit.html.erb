<div class="row"> <!-- row 1 - black bar with glowing green -->
  <div class="col-sm-5 col-xs-12">

    <%= link_to wikis_path do %>
        <i class="fa fa-navicon    fa-3x nav-icons all  row-inline"></i>
    <% end %>

    <%= link_to session[:last_page] do %>
        <i class="fa fa-angle-left fa-4x nav-icons back row-inline"></i>
    <% end %>

    <h1 class="headlines row-inline">Edit Wiki</h1>

  </div>
</div>

<%= simple_form_for @wiki do |w| %>

    <div class="row"> <!-- row 2 - name field -->
      <div class="name-box col-sm-5 col-xs-12">
        <%= w.text_field :name, value: @wiki.name %>
      </div>
    </div>


    <div class="row"> <!-- row 3 - the two text boxes -->
      <!--<div class="col-sm-5 col-xs-12 input-panel">-->
      <div class="col-sm-5 col-xs-12">
        <textarea id="text-input" class="form-control" name="wiki[body]" oninput="this.editor.update()" ><%=@wiki.body%></textarea>
      </div>

      <div class="col-sm-7 col-xs-12 preview">
        <div id="preview"> </div>
      </div>
    </div>

    <div class="row #button-row"> <!-- row 4 - buttons -->
        <div class="col-xs-1">
            <%= w.button :submit, "Update Wiki" %>
            <% end %>
        </div>

        <% if policy(@wiki).destroy? %>
            <div class="col-xs-1 col-xs-offset-10">
              <%= simple_form_for(@wiki, :method => :delete ) do |f|%>
                  <%= f.button :submit, "Delete Wiki", class:'delete pull-right', :confirm => "Delete Wiki?" %>
              <% end %>
            </div>
        <% end %>

    </div>

<script>
    $(document).ready(function(){
        function Editor(input, preview) {
            this.update = function () {
                preview.innerHTML = markdown.toHTML(input.value);
            };
            input.editor = this;
            this.update();
        }

        var $ = function (id) { return document.getElementById(id); };
        new Editor($("text-input"), $("preview"));

    });
</script>


<textarea id="hidden-text" ><%= @wiki.body %></textarea>